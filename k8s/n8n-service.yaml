apiVersion: v1
kind: Service
metadata:
  name: n8n
  namespace: default
  labels:
    app: n8n
    component: workflow-engine
spec:
  type: LoadBalancer  # Change to ClusterIP for internal-only access
                      # or NodePort for Kubernetes node access
  selector:
    app: n8n

  ports:
    - name: http
      port: 80
      targetPort: 5678
      protocol: TCP

  # Session affinity for consistent routing
  sessionAffinity: None

  # For development with LoadBalancer on Docker Desktop/Minikube:
  # kubectl port-forward svc/n8n 5678:80
